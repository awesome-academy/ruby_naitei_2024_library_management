<div data-controller="star-rating" class="flex space-x-3" id="rating-container">
  <%= form_with model: Rating.new, url: ratings_path, method: :post, data: { turbo_stream: true, target: "star-rating.form" }, id: "rating-form" do |form| %>
    <%= form.hidden_field :book_id, value: @book.id %>
    <%= form.hidden_field :rating, id: 'rating-value', data: { target: "star-rating.ratingValue" }, value: @initial_rating  %>
    <% (1..5).each do |num| %>
      <i data-index="<%= num %>" data-target="star-rating.stars" class="bi bi-star-fill text-3xl text-<%= @initial_rating >= num ? 'yellow-400' : 'gray-400' %> cursor-pointer" data-action="click->star-rating#submitRating"></i>
    <% end %>
  <% end %>
</div>
